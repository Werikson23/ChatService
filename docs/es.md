                                     ┌────────────────┐
                                     │    API Gateway │
                                     │   (Fastify)    │
                                     └───────┬────────┘
                                             │ HTTP Request / Response
                                             ▼
                                   ┌─────────────────────┐
                                   │     Plugins         │
                                   │(Auth, Ticket, etc.) │
                                   └─────────┬───────────┘
                                             │
       ┌─────────────────────────────────────┼──────────────────────────────────────┐
       ▼                                     ▼                                      ▼
┌───────────────┐                    ┌───────────────┐                      ┌────────────────┐
│ CommandBus    │                    │ QueryBus      │                      │ EventBus       │
│ (Commands)    │                    │ (Queries)     │                      │ (Eventos)      │
└─────┬─────────┘                    └─────┬─────────┘                      └─────┬──────────┘
      │                                   │                                     │
      ▼                                   ▼                                     ▼
┌───────────────┐                    ┌───────────────┐                      ┌───────────────┐
│ CommandHandler│                    │ QueryHandler  │                      │ EventHandler  │
│ (Executa lógica│                    │ (Consulta DB) │                      │ (Notifica/    │
│ do plugin)    │                    │               │                      │ aciona Realtime)│
└─────┬─────────┘                    └───────────────┘                      └─────┬──────────┘
      │                                                                         │
      │                                                         ┌───────────────┴───────────────┐
      │                                                         │                               │
      ▼                                                         ▼                               ▼
┌───────────────┐                                   ┌─────────────────────┐          ┌───────────────────────┐
│ Infra - DB    │                                   │ Infra - Queue       │          │ Infra - Realtime      │
│ (Postgres)    │                                   │ (RedisStreams)      │          │ (WebSocket / PubSub) │
└───────────────┘                                   └─────────────────────┘          └───────────────────────┘
      ▲                                                         ▲                               ▲
      │                                                         │                               │
      └─────────────────────────────────────────────────────────┴───────────────────────────────┘
                                       │
                                       ▼
                              ┌─────────────────┐
                              │ Observabilidade │
                              │ (Logger, Metrics, Tracing) │
                              └─────────────────┘
